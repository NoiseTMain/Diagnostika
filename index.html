<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechCheck PRO | Mobilní Diagnostika</title>
    <style>
/* ---------------------------------------------------- */
/* CSS Styly začínají zde (Část 2/3) */
/* ---------------------------------------------------- */

:root {
    --primary-color: #00eaff; /* Neonově modrá */
    --background-dark: #1e1e2e; /* Tmavě fialová/šedá */
    --card-dark: #2d2d44; /* Tmavší karta */
    --text-light: #f5f5f5;
    --text-muted: #a0a0b0;
    --success-color: #50fa7b;
    --error-color: #ff5555;
    --warning-color: #f1fa8c;
    --border-radius: 8px;
    --transition-speed: 0.3s;
}

/* Základní reset a nastavení */
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

body {
    background-color: var(--background-dark);
    color: var(--text-light);
    line-height: 1.6;
    display: flex;
    min-height: 100vh;
}

/* Navigace (Sidebar) */
#sidebar {
    width: 250px;
    background-color: var(--card-dark);
    padding: 20px 0;
    display: flex;
    flex-direction: column;
    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.5);
    z-index: 10;
}

.logo {
    text-align: center;
    margin-bottom: 30px;
    padding: 0 20px;
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--primary-color);
    letter-spacing: 1px;
    text-shadow: 0 0 10px var(--primary-color);
}

.nav-item {
    padding: 15px 20px;
    cursor: pointer;
    border-left: 5px solid transparent;
    transition: background-color var(--transition-speed), border-left-color var(--transition-speed);
    display: flex;
    align-items: center;
}

.nav-item:hover, .nav-item.active {
    background-color: rgba(0, 234, 255, 0.1);
    border-left-color: var(--primary-color);
}

.nav-item i {
    margin-right: 10px;
    font-size: 1.2rem;
}

/* Hlavní obsah */
#main-content {
    flex-grow: 1;
    padding: 30px;
    overflow-y: auto;
}

header {
    margin-bottom: 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid var(--card-dark);
    padding-bottom: 20px;
}

header h1 {
    font-size: 2rem;
    color: var(--text-light);
}

/* Dashboard - Přehled */
.dashboard-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.stat-card {
    background-color: var(--card-dark);
    padding: 20px;
    border-radius: var(--border-radius);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(0, 234, 255, 0.1);
}

.stat-card h3 {
    color: var(--text-muted);
    font-size: 1rem;
    margin-bottom: 10px;
}

.stat-card .value {
    font-size: 2.5rem;
    font-weight: bold;
    color: var(--primary-color);
}

.stat-card .details {
    margin-top: 10px;
    font-size: 0.9rem;
    color: var(--text-muted);
}

/* Sekce Testy */
.test-section {
    background-color: var(--card-dark);
    padding: 25px;
    border-radius: var(--border-radius);
    margin-bottom: 25px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

.test-section h2 {
    border-bottom: 2px solid var(--primary-color);
    padding-bottom: 10px;
    margin-bottom: 20px;
    font-size: 1.5rem;
}

.test-list {
    list-style: none;
}

.test-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.test-item:last-child {
    border-bottom: none;
}

.test-info {
    flex-grow: 1;
}

.test-info h4 {
    margin-bottom: 5px;
    color: var(--text-light);
}

.test-info p {
    font-size: 0.85rem;
    color: var(--text-muted);
}

/* Tlačítka */
.btn-start {
    background-color: var(--primary-color);
    color: var(--background-dark);
    border: none;
    padding: 10px 20px;
    border-radius: var(--border-radius);
    cursor: pointer;
    font-weight: bold;
    transition: background-color var(--transition-speed), transform 0.1s;
    text-transform: uppercase;
}

.btn-start:hover {
    background-color: #00d5ee;
    transform: translateY(-1px);
}

.btn-start:active {
    transform: translateY(1px);
}

/* Statusy */
.status {
    font-weight: bold;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 0.8rem;
    min-width: 80px;
    text-align: center;
}

.status.pending {
    background-color: var(--warning-color);
    color: #1e1e2e;
}

.status.running {
    background-color: var(--primary-color);
    color: var(--background-dark);
    animation: pulse 1s infinite;
}

.status.pass {
    background-color: var(--success-color);
    color: #1e1e2e;
}

.status.fail {
    background-color: var(--error-color);
    color: var(--text-light);
}

@keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(0, 234, 255, 0.4); }
    70% { box-shadow: 0 0 0 10px rgba(0, 234, 255, 0); }
    100% { box-shadow: 0 0 0 0 rgba(0, 234, 255, 0); }
}

/* Sekce Report */
.report-content {
    background-color: var(--card-dark);
    padding: 25px;
    border-radius: var(--border-radius);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
}

.report-summary {
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: 20px;
    margin-bottom: 20px;
    border: 1px dashed var(--primary-color);
    border-radius: var(--border-radius);
}

.summary-item h3 {
    font-size: 1.2rem;
    color: var(--text-muted);
}
.summary-item p {
    font-size: 3rem;
    font-weight: 700;
    color: var(--success-color);
}
.summary-item.fail p {
    color: var(--error-color);
}
.summary-item.warning p {
    color: var(--warning-color);
}


/* Panel s výsledky testů */
.test-results-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

.test-results-table th, .test-results-table td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.test-results-table th {
    background-color: rgba(0, 234, 255, 0.05);
    color: var(--primary-color);
    text-transform: uppercase;
    font-size: 0.9rem;
}

.test-results-table tr:hover {
    background-color: rgba(255, 255, 255, 0.03);
}

.result-value.pass { color: var(--success-color); font-weight: bold; }
.result-value.fail { color: var(--error-color); font-weight: bold; }
.result-value.warning { color: var(--warning-color); font-weight: bold; }
.result-value.info { color: var(--text-light); }

/* Detaily zařízení */
.device-details-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-top: 20px;
}

.detail-item {
    background-color: #272739;
    padding: 15px;
    border-radius: var(--border-radius);
}

.detail-item strong {
    color: var(--primary-color);
    display: block;
    margin-bottom: 5px;
    font-size: 0.9rem;
}

/* Animace načítání */
.loader-container {
    text-align: center;
    padding: 50px;
    display: none; /* Skryto, dokud se nespustí test */
}

.loader {
    border: 4px solid rgba(0, 234, 255, 0.2);
    border-top: 4px solid var(--primary-color);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    animation: spin 1s linear infinite;
    margin: 0 auto 10px;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.hidden {
    display: none !important;
}

/* PRO sekce - Speciální tlačítka */
.pro-features {
    padding-top: 20px;
    margin-top: 20px;
    border-top: 1px solid var(--card-dark);
    text-align: center;
}

.btn-pro-export {
    background-color: var(--success-color);
    color: var(--background-dark);
    padding: 12px 25px;
    font-size: 1.1rem;
}

.btn-pro-export:hover {
    background-color: #44dd6e;
}

/* ---------------------------------------------------- */
/* CSS Styly končí zde (Část 2/3 - Cca 250 řádků, se zahozenými komentáři pro HTML to bude více) */
/* ---------------------------------------------------- */
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

    <div id="sidebar">
        <div class="logo">TechCheck **PRO**</div>
        <div class="nav-item active" data-target="dashboard">
            <i class="fas fa-tachometer-alt"></i> Přehled
        </div>
        <div class="nav-item" data-target="tests">
            <i class="fas fa-cogs"></i> Spustit Testy
        </div>
        <div class="nav-item" data-target="report">
            <i class="fas fa-file-alt"></i> Diagnostický Report
        </div>
        <div class="nav-item" data-target="specs">
            <i class="fas fa-mobile-alt"></i> Specifikace Zařízení
        </div>
        <div class="nav-item" data-target="calibration">
            <i class="fas fa-sliders-h"></i> PRO Kalibrace
        </div>
    </div>

    <div id="main-content">
        <header>
            <h1><i class="fas fa-server"></i> Diagnostický Dashboard</h1>
            <div class="user-status">
                **Licence:** <span style="color: var(--primary-color);">PRO Aktivní</span>
            </div>
        </header>

        <section id="dashboard" class="content-section">
            <h2 style="color: var(--primary-color); margin-bottom: 20px;">Rychlý Přehled Systému</h2>
            
            <div class="dashboard-grid">
                <div class="stat-card">
                    <h3>Celkový Stav</h3>
                    <div class="value" id="overall-status">98%</div>
                    <div class="details">Všechny testy (24/25) prošly.</div>
                </div>
                <div class="stat-card">
                    <h3>Stav Baterie</h3>
                    <div class="value" id="battery-health">92%</div>
                    <div class="details">Odhadovaná kapacita proti tovární.</div>
                </div>
                <div class="stat-card">
                    <h3>Využití RAM</h3>
                    <div class="value" id="ram-usage">5.1 GB</div>
                    <div class="details">Z 8.0 GB. Možná optimalizace.</div>
                </div>
                <div class="stat-card">
                    <h3>Teplota CPU</h3>
                    <div class="value" id="cpu-temp">34 °C</div>
                    <div class="details">V normálních provozních mezích.</div>
                </div>
                <div class="stat-card">
                    <h3>Chybné sektory UFS</h3>
                    <div class="value" id="storage-errors">0</div>
                    <div class="details">Vnitřní úložiště bez chyb.</div>
                </div>
                <div class="stat-card">
                    <h3>Geo-lokace (GPS)</h3>
                    <div class="value" id="gps-status" style="color: var(--success-color);">Fix: 1.2m</div>
                    <div class="details">Přesnost satelitního signálu.</div>
                </div>
            </div>

            <div class="test-section">
                <h2><i class="fas fa-chart-line"></i> Protokol Poslední Analýzy</h2>
                <ul class="test-list" id="last-analysis-log">
                    <li class="test-item">
                        <div class="test-info">
                            <h4>Kompletní cyklus baterie</h4>
                            <p>Stav degradace, napětí, proud (Test #1A)</p>
                        </div>
                        <span class="status pass">PROŠLO</span>
                    </li>
                    <li class="test-item">
                        <div class="test-info">
                            <h4>Senzor Akcelerometru</h4>
                            <p>Test os X, Y, Z pro kalibraci (Test #3C)</p>
                        </div>
                        <span class="status fail">CHYBA</span>
                    </li>
                    <li class="test-item">
                        <div class="test-info">
                            <h4>Test Reproduktorů (PRO 20-20000 Hz)</h4>
                            <p>Kontrola frekvenčního rozsahu a zkreslení (Test #2B)</p>
                        </div>
                        <span class="status pass">PROŠLO</span>
                    </li>
                </ul>
            </div>
        </section>

        <section id="tests" class="content-section hidden">
            <h2><i class="fas fa-stethoscope"></i> Spustit Komplexní Diagnostické Testy</h2>

            <div class="test-section">
                <h2>1. Baterie a Energetika</h2>
                <ul class="test-list">
                    <li class="test-item">
                        <div class="test-info">
                            <h4>Analýza Zdraví Baterie (PRO)</h4>
                            <p>Podrobná analýza počtu cyklů, aktuální kapacity a predikce životnosti.</p>
                        </div>
                        <span class="status pending" id="status-battery">Čeká</span>
                        <button class="btn-start" onclick="runTest('battery')">Spustit</button>
                    </li>
                    <li class="test-item">
                        <div class="test-info">
                            <h4>Test Rychlého Nabíjení</h4>
                            <p>Simulace zátěže pro ověření maximálního příkonu a tepelné stability.</p>
                        </div>
                        <span class="status pending" id="status-charging">Čeká</span>
                        <button class="btn-start" onclick="runTest('charging')">Spustit</button>
                    </li>
                </ul>
            </div>

            <div class="test-section">
                <h2>2. Displej a Senzory Rozhraní</h2>
                <ul class="test-list">
                    <li class="test-item">
                        <div class="test-info">
                            <h4>Test Mrtvých Pixelů (PRO)</h4>
                            <p>Projekce čistých barev pro detekci vadných nebo "mrtvých" pixelů.</p>
                        </div>
                        <span class="status pending" id="status-pixels">Čeká</span>
                        <button class="btn-start" onclick="runTest('pixels')">Spustit</button>
                    </li>
                    <li class="test-item">
                        <div class="test-info">
                            <h4>Test Multitouch Odezvy</h4>
                            <p>Ověření doby odezvy a přesnosti dotyku pro 10+ prstů.</p>
                        </div>
                        <span class="status pending" id="status-touch">Čeká</span>
                        <button class="btn-start" onclick="runTest('touch')">Spustit</button>
                    </li>
                </ul>
            </div>

            <div class="test-section">
                <h2>3. Fotoaparát a Senzory</h2>
                <ul class="test-list">
                    <li class="test-item">
                        <div class="test-info">
                            <h4>Test Funkčnosti Hlavní Kamery</h4>
                            <p>Kontrola stabilizace, ostření a zpoždění závěrky.</p>
                        </div>
                        <span class="status pending" id="status-camera">Čeká</span>
                        <button class="btn-start" onclick="runTest('camera')">Spustit</button>
                    </li>
                    <li class="test-item">
                        <div class="test-info">
                            <h4>Test proximity a gyroskopu</h4>
                            <p>Ověření přesnosti senzorů a rychlosti odečtu dat (PRO). </p>
                        </div>
                        <span class="status pending" id="status-gyro">Čeká</span>
                        <button class="btn-start" onclick="runTest('gyro')">Spustit</button>
                    </li>
                </ul>
            </div>
            
            <div class="test-section" style="text-align: center; border: 2px solid var(--primary-color);">
                <h3>Spustit Všechny Testy (Kompletní PRO Cyklus)</h3>
                <p style="margin-bottom: 15px; color: var(--warning-color);">Tento proces simulovaně trvá 90 sekund a provede 24 podrobných kontrol.</p>
                <button class="btn-start btn-pro-export" onclick="runAllTests()">Spustit Vše</button>
                <div class="loader-container" id="all-tests-loader">
                    <div class="loader"></div>
                    <p style="color: var(--primary-color);">Probíhá analýza... (Simulace datového toku)</p>
                </div>
            </div>

        </section>

        <section id="report" class="content-section hidden">
            <h2><i class="fas fa-clipboard-list"></i> Kompletní Diagnostický Report (PRO)</h2>

            <div class="report-content">
                <p style="color: var(--text-muted); margin-bottom: 20px;">
                    **Datum Generování:** <span id="report-date">26. 11. 2025 - 17:51:24</span>
                </p>
                
                <div class="report-summary">
                    <div class="summary-item">
                        <h3>PROŠLO</h3>
                        <p id="report-pass-count">21</p>
                    </div>
                    <div class="summary-item warning">
                        <h3>VAROVÁNÍ</h3>
                        <p id="report-warning-count">2</p>
                    </div>
                    <div class="summary-item fail">
                        <h3>CHYBY</h3>
                        <p id="report-fail-count">1</p>
                    </div>
                </div>

                <h3>Detailní Tabulka Výsledků</h3>
                <table class="test-results-table">
                    <thead>
                        <tr>
                            <th>ID Testu</th>
                            <th>Popis Testu</th>
                            <th>Naměřená Hodnota</th>
                            <th>Stav</th>
                            <th>Doporučení PRO</th>
                        </tr>
                    </thead>
                    <tbody id="report-table-body">
                        <tr>
                            <td>1A-BATT</td>
                            <td>Kapacita Baterie</td>
                            <td class="result-value info">92%</td>
                            <td class="result-value pass">PASS</td>
                            <td>Optimalizace nabíjecích cyklů pro max. životnost.</td>
                        </tr>
                        <tr>
                            <td>2C-PIXEL</td>
                            <td>Mrtvé/Vázané Pixely</td>
                            <td class="result-value info">1 zjištěn</td>
                            <td class="result-value warning">WARNING</td>
                            <td>Drobná vizuální vada, nevyžaduje výměnu.</td>
                        </tr>
                        <tr>
                            <td>3C-GYRO</td>
                            <td>Odečet Gyroskopu (Drift)</td>
                            <td class="result-value info">Odchylka 2.1°</td>
                            <td class="result-value fail">FAIL</td>
                            <td>**VYŽADUJE KALIBRACI**. Může ovlivnit AR a herní výkon.</td>
                        </tr>
                        <tr>
                            <td>1D-TEMP</td>
                            <td>Tepelné Čidlo CPU</td>
                            <td class="result-value info">34°C</td>
                            <td class="result-value pass">PASS</td>
                            <td>Systémové chlazení je plně funkční.</td>
                        </tr>
                         <tr>
                            <td>4A-WIFI</td>
                            <td>Propustnost Wi-Fi (5GHz)</td>
                            <td class="result-value info">850 Mbps</td>
                            <td class="result-value pass">PASS</td>
                            <td>Vysoká stabilita přenosu dat.</td>
                        </tr>
                         <tr>
                            <td>5B-MEM</td>
                            <td>Stav Paměti RAM (Test zápisu)</td>
                            <td class="result-value info">12 ms</td>
                            <td class="result-value pass">PASS</td>
                            <td>Rychlost paměti v rámci továrních specifikací.</td>
                        </tr>
                        <tr>
                            <td>6A-MIC</td>
                            <td>Citlivost Mikrofonu (PRO)</td>
                            <td class="result-value info">-38 dBV</td>
                            <td class="result-value pass">PASS</td>
                            <td>Křišťálově čistý záznam zvuku.</td>
                        </tr>
                        <tr>
                            <td>7C-FLASH</td>
                            <td>Intenzita LED Blesku</td>
                            <td class="result-value info">450 Lux</td>
                            <td class="result-value pass">PASS</td>
                            <td>Plný jas pro noční snímky.</td>
                        </tr>
                        <tr>
                            <td>8E-PORT</td>
                            <td>USB-C Datová Integrita</td>
                            <td class="result-value info">10 Gbps</td>
                            <td class="result-value pass">PASS</td>
                            <td>Ověřena funkčnost všech datových pinů.</td>
                        </tr>
                    </tbody>
                </table>

                <div class="pro-features">
                    <p style="color: var(--primary-color); margin-bottom: 15px;">**PRO EXPORT:** Generování zabezpečeného PDF reportu pro techniky.</p>
                    <button class="btn-start btn-pro-export" onclick="alert('Simulace exportu PRO PDF reportu dokončena!')">Exportovat PDF Report</button>
                </div>
            </div>
        </section>

        <section id="specs" class="content-section hidden">
            <h2><i class="fas fa-info-circle"></i> Specifikace Zařízení a Tovární Data</h2>

            <div class="report-content">
                <h3>Identifikace Hardwaru</h3>
                <div class="device-details-grid">
                    <div class="detail-item"><strong>Model:</strong> <span id="spec-model">Phone X Pro v2.1</span></div>
                    <div class="detail-item"><strong>Výrobce:</strong> <span id="spec-vendor">ACME Corp.</span></div>
                    <div class="detail-item"><strong>Sériové Číslo:</strong> <span id="spec-serial">S/N: ACME-PXP21-5J8W7A</span></div>
                    <div class="detail-item"><strong>Verze OS:</strong> <span id="spec-os">Android 14 (Security Patch 2025-11-01)</span></div>
                    <div class="detail-item"><strong>RAM:</strong> <span id="spec-ram">8 GB LPDDR5X</span></div>
                    <div class="detail-item"><strong>Úložiště:</strong> <span id="spec-storage">256 GB UFS 4.0</span></div>
                    <div class="detail-item"><strong>Typ CPU:</strong> <span id="spec-cpu">SnapDragon 8 Gen 3 Max</span></div>
                    <div class="detail-item"><strong>Rozlišení Displeje:</strong> <span id="spec-display">2400x1080 (120 Hz AMOLED)</span></div>
                </div>

                <h3 style="margin-top: 30px;">Tovární Kalibrace (PRO Data)</h3>
                <div class="device-details-grid">
                    <div class="detail-item"><strong>Tovární Kapacita Baterie:</strong> 5000 mAh</div>
                    <div class="detail-item"><strong>Minimální Verze Firmware:</strong> 1.0.3</div>
                    <div class="detail-item"><strong>Tolerance Gyroskopu:</strong> ±0.5°</div>
                    <div class="detail-item"><strong>Max. Nabíjecí Příkon:</strong> 120W</div>
                </div>
            </div>
        </section>

        <section id="calibration" class="content-section hidden">
            <h2><i class="fas fa-sliders-h"></i> PRO Kalibrace Systémových Senzorů</h2>
            <div class="test-section">
                <p style="color: var(--warning-color); font-weight: bold;">Tato sekce simuluje pokročilé nástroje dostupné pouze v licenci PRO. Kalibrace se provádí na úrovni firmwaru a může být rizková.</p>
                <ul class="test-list">
                    <li class="test-item">
                        <div class="test-info">
                            <h4>Reset Gyroskopu/Akcelerometru</h4>
                            <p>Obnovení továrních kalibračních křivek pro přesné snímání pohybu.</p>
                        </div>
                        <button class="btn-start" onclick="runCalibration('gyro-reset')">Kalibrovat</button>
                    </li>
                    <li class="test-item">
                        <div class="test-info">
                            <h4>Optimalizace Nabíjecího Čipu (PRO)</h4>
                            <p>Softwarové úprava řízení teploty a proudu pro snížení tepelného stresu.</p>
                        </div>
                        <button class="btn-start" onclick="runCalibration('charge-opt')">Optimalizovat</button>
                    </li>
                    <li class="test-item">
                        <div class="test-info">
                            <h4>Oprava Vazby Pixelů (Teplý Cyklus)</h4>
                            <p>Spuštění cyklu barev s vysokým jasem pro pokus o "oživení" vázaných pixelů.</p>
                        </div>
                        <button class="btn-start" onclick="runCalibration('pixel-fix')">Spustit Cyklus</button>
                    </li>
                </ul>
            </div>
        </section>
        
    </div>

    <script>
/* ---------------------------------------------------- */
/* JavaScript Logika začíná zde (Část 3/3) */
/* ---------------------------------------------------- */

// Nastavení globálních proměnných pro simulaci
const TEST_DURATIONS = {
    'battery': 3000,
    'charging': 2500,
    'pixels': 4000,
    'touch': 1500,
    'camera': 3500,
    'gyro': 4500,
    'all': 15000 // Simulace 15 sekund pro všechny testy
};

const TEST_RESULTS = {};
const TEST_NAMES = ['battery', 'charging', 'pixels', 'touch', 'camera', 'gyro'];
const STATUS_ELEMENTS = {
    'battery': document.getElementById('status-battery'),
    'charging': document.getElementById('status-charging'),
    'pixels': document.getElementById('status-pixels'),
    'touch': document.getElementById('status-touch'),
    'camera': document.getElementById('status-camera'),
    'gyro': document.getElementById('status-gyro')
};

// Funkce pro simulaci náhodného výsledku (s vyšší pravděpodobností úspěchu)
function getSimulatedResult(testId) {
    const rand = Math.random();
    let status;
    let value;
    let recommendation;

    switch (testId) {
        case 'battery':
            status = rand < 0.1 ? 'fail' : (rand < 0.3 ? 'warning' : 'pass');
            value = (90 + Math.floor(Math.random() * 8)) + '%';
            recommendation = status === 'pass' ? 'Stav je optimální.' : (status === 'warning' ? 'Zvažte kalibraci čipu nabíjení.' : '**Kritická degradace**. Doporučena výměna.');
            break;
        case 'charging':
            status = rand < 0.1 ? 'fail' : 'pass';
            value = (60 + Math.floor(Math.random() * 60)) + 'W';
            recommendation = status === 'pass' ? 'Rychlé nabíjení funkční.' : 'Zkontrolujte adaptér/kabel.';
            break;
        case 'pixels':
            status = rand < 0.2 ? 'warning' : 'pass';
            value = rand < 0.2 ? '1-2 zjištěno' : '0';
            recommendation = status === 'warning' ? 'Spusťte cyklus pro oživení pixelů.' : 'Displej je bez vad.';
            break;
        case 'touch':
            status = rand < 0.05 ? 'fail' : 'pass';
            value = (8 + Math.floor(Math.random() * 4)) + ' ms';
            recommendation = status === 'pass' ? 'Odezva v normě.' : 'Test dotykové vrstvy selhal.';
            break;
        case 'camera':
            status = rand < 0.1 ? 'fail' : 'pass';
            value = status === 'pass' ? 'OK' : 'Chyba ostření';
            recommendation = status === 'pass' ? 'Všechny funkce kamery ověřeny.' : 'Nutná kontrola modulu fotoaparátu.';
            break;
        case 'gyro':
            status = rand < 0.35 ? 'fail' : 'pass'; // Děláme gyroskop častěji chybný pro účel DEMO
            value = status === 'pass' ? '0.3°' : (1.5 + Math.random() * 2).toFixed(1) + '°';
            recommendation = status === 'pass' ? 'Přesnost v rámci spec.' : '**VYŽADUJE KALIBRACI**. Odchylka zjištěna.';
            break;
        default:
            status = 'pass';
            value = 'N/A';
            recommendation = 'Test proveden.';
    }
    
    // Uložení výsledku do globálního objektu
    TEST_RESULTS[testId] = { status, value, recommendation };
    return { status, value, recommendation };
}


// Hlavní funkce pro spuštění jednotlivého testu
function runTest(testId) {
    const statusEl = STATUS_ELEMENTS[testId];
    if (!statusEl) return;

    // 1. Nastavit stav na "running"
    statusEl.className = 'status running';
    statusEl.textContent = 'BĚŽÍ...';

    // 2. Simulovat běh testu pomocí setTimeout
    setTimeout(() => {
        // 3. Získat simulovaný výsledek
        const result = getSimulatedResult(testId);
        
        // 4. Nastavit finální status
        statusEl.className = `status ${result.status}`;
        statusEl.textContent = result.status.toUpperCase();
        
        // Aktualizovat dashboard po dokončení
        updateDashboard();
        
    }, TEST_DURATIONS[testId]);
}


// Funkce pro spuštění Všech Testů (Kompletní PRO Cyklus)
function runAllTests() {
    // 1. Zobrazit loader
    const loaderContainer = document.getElementById('all-tests-loader');
    loaderContainer.style.display = 'block';
    
    // 2. Nastavit všechny testy na BĚŽÍ
    TEST_NAMES.forEach(testId => {
        STATUS_ELEMENTS[testId].className = 'status running';
        STATUS_ELEMENTS[testId].textContent = 'BĚŽÍ...';
    });
    
    // 3. Simulace delšího běhu
    setTimeout(() => {
        // 4. Provedení simulací pro všechny testy
        TEST_NAMES.forEach(testId => {
            const result = getSimulatedResult(testId);
            STATUS_ELEMENTS[testId].className = `status ${result.status}`;
            STATUS_ELEMENTS[testId].textContent = result.status.toUpperCase();
        });
        
        // 5. Skrýt loader a aktualizovat report
        loaderContainer.style.display = 'none';
        updateDashboard();
        updateReportTable();
        
        // Oznámení pro uživatele
        alert('Kompletní PRO Diagnostický Cyklus Dokončen! Výsledky k dispozici v sekci "Diagnostický Report".');
        
    }, TEST_DURATIONS.all);
}


// Funkce pro aktualizaci Dashboardu na základě výsledků testů
function updateDashboard() {
    const resultsArray = Object.values(TEST_RESULTS);
    if (resultsArray.length === 0) return;

    let passCount = resultsArray.filter(r => r.status === 'pass').length;
    let failCount = resultsArray.filter(r => r.status === 'fail').length;
    let warningCount = resultsArray.filter(r => r.status === 'warning').length;
    let totalTests = TEST_NAMES.length;
    let overallPercentage = Math.round((passCount / totalTests) * 100);

    // Aktualizace hlavního stavu
    document.getElementById('overall-status').textContent = `${overallPercentage}%`;
    
    // Aktualizace Battery Health (simulace mírné degradace po testu)
    const currentBatteryHealth = parseInt(document.getElementById('battery-health').textContent) || 92;
    if(TEST_RESULTS['battery'] && TEST_RESULTS['battery'].status === 'pass') {
         // Pokud test baterie proběhl, simulujeme velmi mírné zlepšení/stabilizaci
         document.getElementById('battery-health').textContent = currentBatteryHealth + '%';
    } else if (TEST_RESULTS['battery'] && TEST_RESULTS['battery'].status !== 'pass') {
         // Pokud test selhal/varoval, simulujeme pokles
         document.getElementById('battery-health').textContent = (currentBatteryHealth - 1) + '%';
    }

    // Aktualizace logu poslední analýzy
    const logEl = document.getElementById('last-analysis-log');
    logEl.innerHTML = `
        <li class="test-item">
            <div class="test-info">
                <h4>Souhrn Analýzy (${new Date().toLocaleTimeString()})</h4>
                <p>Prošlo: ${passCount}, Selhalo: ${failCount}, Varování: ${warningCount}</p>
            </div>
            <span class="status ${failCount > 0 ? 'fail' : (warningCount > 0 ? 'warning' : 'pass')}">${failCount > 0 ? 'CHYBA' : 'OK'}</span>
        </li>
    `;
    
    // Prodloužení kódu - Přidání dalších simulovaných logů
